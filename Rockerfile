FROM node:onbuild

MOUNT .:/src
WORKDIR /src
RUN npm install
VOLUME /root/.npm

FROM node:slim

ENV SVC_PATH /var/service
ENV MONGODB_HOST_PORT 172.17.42.1:27017
ENV MONGODB_DATABASE uptime
ENV MONGODB_USER root
ENV MONGODB_PASSWORD root
ENV AUTH_USER root
ENV AUTH_PASSWORD root

COPY . $SVC_PATH

CMD cd $SVC_PATH && node app

EXPOSE 8082

